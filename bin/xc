#!/usr/bin/env ruby

$LOAD_PATH.unshift File.dirname(__FILE__) + "/../lib"
require 'dotenv'
@env = Dotenv.load('./lib/.env')

require "fileutils"
require "rubygems"
require "optparse"

require "ms-devops"

# config = MsDevops::Configuration.new
# MsDevops.configuration = config
logger = MsDevops::Logger.new
# end
# cmd = ARGV.shift
MsDevops.configuration
p `printenv`
options = {
  open_xcode: false,
  do_nothing: false,
}
logger.log(MsDevops.configuration.gem_local_dev_scripts)
OptionParser.new do |opts|
  opts.banner = "Usage: xc [options]"

  opts.on("-v", "--[no-]verbose", "Run verbosely") do |v|
    options[:verbose] = v
  end

  opts.on("-o", "--open", "Open xcworkspace or project") do |v|
    options[:open_xcode] = true
  end
end.parse!

puts options
puts ARGV

if options[:open_xcode]
  MsDevops.open_xcode
end
